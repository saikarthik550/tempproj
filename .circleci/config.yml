version: 2.1

jobs:
  cleanup:
    docker:
  
      - image: python:3.11.0-alpine3.16
    steps:
      - checkout
      - run:
          name: Install dependencies
          command: |
            # your code here
            apk add --update --no-cache tar gzip nodejs npm curl
            pip install awscli
      - run:
          name: store old workflowid  
          command: |
            # your code here
            cat OldWorkflowID.txt  
            export OldWorkflowID=$(cat ~/project/OldWorkflowID.txt)
            echo "printing file output"
            echo $OldWorkflowID    
            echo $OldWorkflowID | sed -e 's/^[[:space:]]*//'
            
              aws s3 rm "s3://udapeople-${OldWorkflowID( )}" --recursive || true
workflows:           
  default:
    jobs:
      - cleanup
         
